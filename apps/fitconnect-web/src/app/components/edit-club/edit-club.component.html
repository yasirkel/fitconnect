<h1>Edit club</h1>

<div style="margin-bottom: 1rem;">
  <a routerLink="/clubs">&larr; Back to clubs</a>
  <span *ngIf="clubId"> | </span>
  <a *ngIf="clubId" [routerLink]="['/clubs', clubId]">&larr; Back to details</a>
</div>

<div *ngIf="loading">Loading club...</div>

<div *ngIf="!loading && error" style="color: red; margin-bottom: 1rem;">
  {{ error }}
</div>

<form *ngIf="!loading" [formGroup]="form" (ngSubmit)="onSubmit()">
  <div>
    <label>
      Name:
      <input type="text" formControlName="name" />
    </label>
    <div *ngIf="form.controls.name.touched && form.controls.name.invalid">
      Name is required.
    </div>
  </div>

  <div>
    <label>
      Address:
      <input type="text" formControlName="address" />
    </label>
    <div *ngIf="form.controls.address.touched && form.controls.address.invalid">
      Address is required.
    </div>
  </div>

  <div>
    <label>
      City:
      <input type="text" formControlName="city" />
    </label>
    <div *ngIf="form.controls.city.touched && form.controls.city.invalid">
      City is required.
    </div>
  </div>

  <div>
    <label>
      Description:
      <textarea formControlName="description"></textarea>
    </label>
  </div>

  <div>
    <label>
      Sports offered (comma separated):
      <input type="text" formControlName="sportsOffered" />
    </label>
    <div
      *ngIf="
        form.controls.sportsOffered.touched &&
        form.controls.sportsOffered.invalid
      "
    >
      At least one sport is required.
    </div>
  </div>

  <div>
    <label>
      Owner ID:
      <input type="text" formControlName="ownerId" />
    </label>
    <small>(Owner ID is not editable)</small>
  </div>

  <div *ngIf="error" style="color: red; margin-top: 0.5rem;">
    {{ error }}
  </div>

  <button type="submit" [disabled]="saving">
    {{ saving ? 'Saving...' : 'Save changes' }}
  </button>
</form>
