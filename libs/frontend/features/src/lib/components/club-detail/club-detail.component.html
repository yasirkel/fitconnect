<a routerLink="/clubs">&larr; Back to clubs</a> <br>


<div *ngIf="loading">Loading club details...</div>

<div *ngIf="!loading && error">
  {{ error }}
</div>

<div *ngIf="!loading && !error && club">
  <h1 class="text-2xl font-bold mb-2">
    {{ club.name }}
  </h1>

  <p class="mb-2">
    <strong>City:</strong> {{ club.city }}
  </p>

  <p class="mb-2" *ngIf="club.description">
    <strong>Description:</strong> {{ club.description }}
  </p>

  <p class="mb-2">
    <strong>Address:</strong> {{ club.address }}
  </p>

  <p class="mb-2">
    <strong>Sports offered:</strong>
    <span *ngIf="club.sportsOffered?.length; else noSports">
      {{ club.sportsOffered.join(', ') }}
    </span>
    <ng-template #noSports>Not specified</ng-template>
  </p>

  <div style="margin: 1rem 0;">
    <a *ngIf="isOwner" [routerLink]="['/clubs', club.id, 'edit']">Edit club</a>
    &nbsp; | &nbsp;
    <button (click)="onDelete()" [disabled]="deleting">
      {{ deleting ? 'Deleting...' : 'Delete club' }}
    </button>
  </div>
<div *ngIf="!loading && !error && !club">
  Club not found.
</div>

<!-- Trainings section -->
<h2>Trainings</h2> <a *ngIf="club && isOwner" [routerLink]="['/trainings/create']" [queryParams]="{ clubId: club.id }"> + Add training</a>


<p *ngIf="trainingsLoading">Trainings laden...</p>
<p *ngIf="trainingsError">{{ trainingsError }}</p>

<ul *ngIf="!trainingsLoading && !trainingsError && trainings.length > 0">
  <li *ngFor="let t of trainings">
    <strong>{{ t.title }}</strong><br/>
    {{ t.startTime | date:'short' }} · {{ t.durationMinutes }} min · max {{ t.capacity }} ·
    Enrolled: {{ getEnrolledCount(t.id) }} / {{ t.capacity }}

    <br/>

    <button *ngIf="!isEnrolled(t.id)" (click)="enroll(t.id)" [disabled]="isFull(t.id, t.capacity)">Enroll</button>
    <button *ngIf="isEnrolled(t.id)" (click)="unenroll(t.id)">Unenroll</button>

    <br/>
    
    <a [routerLink]="['/trainings', t.id]">View</a>
    <a *ngIf="isOwner" [routerLink]="['/trainings', t.id, 'edit']">Edit</a>
  </li>
</ul>

<p *ngIf="!trainingsLoading && !trainingsError && trainings.length === 0">
  Nog geen trainingen voor deze club.
</p>

